# ~/.config/picom/picom.conf

backend = "glx";
vsync = true;
opacity = true;



rules = (
	#{ match = "window_type = 'unknown' || window_type = 'desktop' || window_type = 'dock' || window_type = 'toolbar' || window_type = 'menu' || window_type = 'utility' || window_type = 'splash' || window_type = 'dialog' || window_type = 'normal' || window_type = 'dropdown_menu' || window_type = 'popup_menu' || window_type = 'tooltip' || window_type = 'notification' || window_type = 'combo' || window_type = 'DND'"; blur-background=false},
	
	#{ match = "class_g = 'org.gnome.Nautilus'"; opacity = 0.85},
	#{ match = "window_type = 'dock' && x2 > 1000";shadow = true},
	{ match = "window_type = 'combo'";shadow = false},
#================================================================================================
	{ match = "window_type = 'normal' && !class_g = 'Eww'";corner-radius=5;full-shadow = true;animations = ({
		triggers = [ "open" ];
		placeholder0 = 0.3;
		scale-x = {
			curve = "cubic-bezier(0.05, 0.9, 0.1, 1.05)";
			duration = "placeholder0";
			start = 0;
			end = 1;
		};
		scale-y = "scale-x";
		offset-x = "(1 - scale-x) / 2 * window-width";
		offset-y = "(1 - scale-y) / 2 * window-height";
		shadow-scale-x = "scale-x";
		shadow-scale-y = "scale-y";
		shadow-offset-x = "offset-x";
		shadow-offset-y = "offset-y";
		
	}, 
	{
		triggers = [ "close" ];
		opacity = {
        duration = 0.2;
        start = "window-raw-opacity-before";
        end = 0.0;
		};
        blur-opacity = "opacity";
		shadow-opacity = {
        duration = 0.2;
        start = 0.75;
        end = 0.5;
		};
		scale-x = {
			curve = "cubic-bezier(0,0,0,0)";
			duration = 0.2;
			start = 1;
			end = 0;
		};
		offset-x = "(1 - scale-x) / 2 * window-width";
		offset-y = "(1 - scale-y) / 2 * window-height";
		scale-y = "scale-x";
		shadow-scale-x = "scale-x";
		shadow-scale-y = "scale-y";
		shadow-offset-x = "offset-x";
		shadow-offset-y = "offset-y";
        saved-image-blend = {
		duration = 0.4;
        start = 1;
        end = 0;
	    };
	},
	{
		triggers = [ "geometry"  ];
		placeholder0 = 0.4;
	scale-x = {
        curve = "cubic-bezier(0.05, 0.9, 0.1, 1.05)";
        duration = "placeholder0";
        start = "window-width-before / window-width";
        end = 1;
    };
    scale-y = {
        curve = "cubic-bezier(0.05, 0.9, 0.1, 1.05)";
        duration = "placeholder0";
        start = "window-height-before / window-height";
        end = 1;
    };
    shadow-scale-x = "scale-x";
    shadow-scale-y = "scale-y";
    offset-x = {
        curve = "cubic-bezier(0.05, 0.9, 0.1, 1.05)";
        duration = "placeholder0";
        start = "window-x-before - window-x";
        end = 0;
    };
    offset-y = {
        curve = "cubic-bezier(0.05, 0.9, 0.1, 1.05)";
        duration = "placeholder0";
        start = "window-y-before - window-y";
        end = 0;
    };
    shadow-offset-x = "offset-x";
    shadow-offset-y = "offset-y";
	saved-image-blend = {
		duration = 0.2;
        start = 1;
        end = 0;
	};
	}, 
	);
	shadow = true;
	},
#====================================================================================================================================================
	{ match = "class_g = 'org.jackhuang.hmcl.Launcher'"; shadow = false},
    { match = "window_type = 'popup_menu' && class_g = 'Eww' || class_g = 'Dunst'"; corner-radius=10;shadow = true},
    #{ match = "window_type = 'normal' && class_g = 'Eww'"; corner-radius=10},
    #{ match = "class_g = 'Eww1'";shadow = true},
	#{ match = "window_type = 'normal'";animations = ({triggers = [ "show" ];preset = "slide-in";duration=0.5;},{triggers = [ "hide" ];preset = "disappear";duration=0.1;})},
	{ match = "class_g = 'i3-drag'";opacity = 0.5;animations = ({triggers = [ "open" ];preset = "appear";duration=0.1;},{triggers = [ "close" ];preset = "disappear";duration=0.1;})},
	{ match = "class_g = 'Rofi' || class_g = 'Eww' || class_g = 'Dunst'";animations = (
	{triggers = [ "open","show" ];preset = "appear";duration=0.1;scale=1.0},
	{triggers = [ "close","hide" ];preset = "disappear";duration=0.1;scale=1.0},
	)},
	#{ match = "class_g = 'Polybar' && y < 960 || class_g = 'Eww' && y < 960 ";animations = (
	#{triggers = [ "open" ];preset = "slide-in";duration=1.0;direction="up"},
	#)},

	#{ match = "class_g = 'Polybar' && y > 960 || class_g = 'Eww' && y > 960 ";animations = (
	#{triggers = [ "open" ];preset = "slide-in";duration=1.0;direction="down"},
	#)},

	#{ match = "class_g = 'Polybar' && x2 > 1000";blur-background=true},

	#{ match = "window_type = 'normal'";animations = (
	#{triggers = [ "hide" ];preset = "fly-out";duration=0.3;direction="down"},{triggers = [ "show" ];preset = "fly-in";duration=0.3;direction="down"}
	#)},


	{
        match = "_MY_CUSTOM_WORKSPACE_SWITCH@ = 1";
        animations = (
            {
                triggers = ["show"];
                offset-x = {
                    start = "-1920";
                    end = "0";
                    duration = "0.1";
                };
                shadow-offset-x = "offset-x"
            },
            {
                triggers = ["hide"];
                opacity = {
                    curve = "linear";
                    duration = 0.1;
                    start = "window-raw-opacity-before";
                    end = "window-raw-opacity-before";
                };
                blur-opacity = 0;
                shadow-opacity = "opacity";
                offset-x = {
                    start = "0";
                    end = "-1920";
                    duration = "0.1"
                };
                shadow-offset-x = "offset-x"
            }
        )
    },
    {
        match = "_MY_CUSTOM_WORKSPACE_SWITCH@ = 2";
        animations = (
            {
                triggers = ["show"];
                offset-x = {
                    start = "1920";
                    end = "0";
                    duration = "0.1";
                };
                shadow-offset-x = "offset-x"
            },
            {
                triggers = ["hide"];
                opacity = {
                    curve = "linear";
                    duration = 0.1;
                    start = "window-raw-opacity-before";
                    end = "window-raw-opacity-before";
                };
                blur-opacity = 0;
                shadow-opacity = "opacity";
                offset-x = {
                    start = "0";
                    end = "1920";
                    duration = "0.1"
                };
                shadow-offset-x = "offset-x"
            }
        )
    },

	{ match = "class_g = 'kitty'";full-shadow = false;opacity = 1.0;animations = (    #shader = "/home/epsilonsatoshi/.config/i3/glsl/1.glsl";
        {
		triggers = [ "geometry"  ];
		placeholder0 = 0.4;
	scale-x = {
        curve = "cubic-bezier(0.05, 0.9, 0.1, 1.05)";
        duration = "placeholder0";
        start = "window-width-before / window-width";
        end = 1;
    };
    scale-y = {
        curve = "cubic-bezier(0.05, 0.9, 0.1, 1.05)";
        duration = "placeholder0";
        start = "window-height-before / window-height";
        end = 1;
    };
    shadow-scale-x = "scale-x";
    shadow-scale-y = "scale-y";
    offset-x = {
        curve = "cubic-bezier(0.05, 0.9, 0.1, 1.05)";
        duration = "placeholder0";
        start = "window-x-before - window-x";
        end = 0;
    };
    offset-y = {
        curve = "cubic-bezier(0.05, 0.9, 0.1, 1.05)";
        duration = "placeholder0";
        start = "window-y-before - window-y";
        end = 0;
    };
    shadow-offset-x = "offset-x";
    shadow-offset-y = "offset-y";
	saved-image-blend = {
		duration = 0.01;
        start = 1;
        end = 0;
	};
	}, 
    )},

	

);



shadow = false;
shadow-opacity = 0.75;
shadow-radius = 15;
shadow-offset-x = -15;
shadow-offset-y = -15;

no-fading-openclose = true;
